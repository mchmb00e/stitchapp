<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Endpoints</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="stitchapp--endpoints">STITCHAPP | Endpoints</h1>
<p><strong>Desarrollador:</strong> Miguel Chamorro<br>
<strong>Contacto:</strong> <a href="mailto:miguelchamorro912@gmail.com">miguelchamorro912@gmail.com</a></p>
<h2 id="general-response">General Response</h2>
<pre><code>{estado, descripcion,res}
res: Contiene la respuesta de la api.
</code></pre>
<h2 id="get">GET</h2>
<h3 id="bordados">Bordados</h3>
<pre><code>/api/bordados/filtrar
Descripción: Filtra los bordados con distintos parametros opcionales.

contiene (str)  : Filtra si contiene [contiene] en el nombre del bordado.
favorito (bool) : Filtra si son favoritos o no.
categoria (int) : Filtra por categoría.
order (int)     : Ordena la respuesta con las siguientes opciones;
[1: A-Z | 2: Z-A | 3: Primera Modificación | 4: Última modificación].

Response: [{id, nombre, favorito}]
</code></pre>
<hr>
<pre><code>/api/bordados/imagen
Descripción: Retorna la previsualizacaión de un bordado renderizada en pyembroidery.

id (int) : id del bordado (id &gt;= 1)

Response: FileResponse, Type: PNG
</code></pre>
<hr>
<pre><code>/api/bordados/&lt;id:int&gt;
Descripción: Retorna información de un bordado.

Response: {id, nombre, categoria, favorito, modificacion}
</code></pre>
<hr>
<h3 id="categorías">Categorías</h3>
<pre><code>/api/categorias/lista
Descripción: Retorna todas las categorías disponibles

Response: [{id,nombre,descripcion,cantidad}]
</code></pre>
<hr>
<h3 id="medios">Medios</h3>
<pre><code>/api/medios/lista
Descripcion: Retorna los medios extraibles disponibles con filtros opcionales

solo_registrados (bool) : Filtra solo los medios extraíbles registrados.

Response: [{id, nombre, registrado}]
</code></pre>
<hr>
<pre><code>/api/medios/&lt;id:int&gt;
Descripción: Retorna información acerca de un medio registrado.

Response: {id_bordados, limite}
</code></pre>
<hr>
<h2 id="post">POST</h2>
<h3 id="bordados-1">Bordados</h3>
<pre><code>/api/bordados/previsualizacion
Descripción: Retorna una presivualización de un archivo .PES

Body: multiport/form-data {file (.PES)}

Response: FileResponse
</code></pre>
<hr>
<pre><code>/api/bordados
Descripción: Crea un bordado nuevo

Body: multiport/form-data {nombre, categoria, favorito, file}

Response: id (int)
</code></pre>
<hr>
<h3 id="categorías-1">Categorías</h3>
<pre><code>/api/categorias
Descripción: Crea una categoría nueva

Body: multiport/form-data {nombre, descripcion}

Response: id (int)
</code></pre>
<hr>
<h3 id="medios-1">Medios</h3>
<pre><code>/api/medios/exportado
Descripción: Registra la exportación de un bordado.

Body: multiport/form-data {id_bordado, id_medio}

Response: {current_timestamp}
</code></pre>
<hr>
<pre><code>/api/medios
Descripción: Registra un medio extraíble.

Body: multiport/form-data {nombre_actual, nuevo_nombre}

Response: {id, current_timestamp, token}
</code></pre>
<hr>
<h2 id="update">UPDATE</h2>
<h3 id="bordados-2">Bordados</h3>
<pre><code>/api/bordados/&lt;id:int&gt;
Descripción: Actualiza información sobre un bordado.

Body: multiport/form-data {nombre, categoria, favorito}

Response: {current_timestamp}
</code></pre>
<hr>
<h3 id="categorías-2">Categorías</h3>
<pre><code>/api/categorias/&lt;id:int&gt;
Descripción: Actualiza información sobre una categoría.

Body: multiport/form-data {nombre, descripción}

Response: {current_timestamp}
</code></pre>
<hr>
<h2 id="delete">DELETE</h2>
<h3 id="categorias">Categorias</h3>
<pre><code>/api/categorias/&lt;id:int&gt;
Descripción: Elimina una categoría

Body: null

Response: {current_timestamp}
</code></pre>
<hr>
<h3 id="medios-2">Medios</h3>
<pre><code>/api/medios/&lt;id:int&gt;
Descripción: Elimina un bordado de un medio extraíble

Body: null

Response: {current_timestamp}
</code></pre>
</div>
</body>

</html>
